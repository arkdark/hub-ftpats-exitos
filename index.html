<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <link rel="icon" type="image/x-icon" href="logo.png">
  <title>Hub Versões ATS - Êxitos Sistemas</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" defer></script>
  <style>
    body {
      background: linear-gradient(-45deg, #1a237e, #004d40, #880e4f, #1565c0);
      background-size: 400% 400%;
      animation: gradientMove 15s ease infinite;
      color: white;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    @keyframes gradientMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .card-custom {
      border-radius: 20px;
      color: white;
      padding: 30px 10px;
      text-align: center;
      transition: transform 0.2s ease;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }

    .card-custom:hover {
      transform: scale(1.05);
    }

    .card-icon {
      width: 60px;
      height: 60px;
      margin-bottom: 15px;
    }

    .bg-business { background-color: #880E0E; }
    .bg-start    { background-color: #004D40; }
    .bg-entrega  { background-color: #2E7D32; }
    .bg-backup   { background-color: #1565C0; }
    .bg-sped     { background-color: #FFA000; color: #000; }
    .bg-checkout { background-color: #000000; }

    .footer {
      background-color: rgba(0, 0, 0, 0.8);
      color: #ccc;
      text-align: center;
      padding: 15px 0;
      margin-top: auto;
      font-size: 0.9rem;
    }

    .form-control, .btn {
      max-width: 500px;
      margin: 0 auto;
    }

    input::placeholder {
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="container my-5">
    <div class="row justify-content-center">
      <img src="logo.png" alt="Logo HUB" class="img-fluid mb-4" style="max-width: 200px;">
      <h2 class="col-12 text-center mb-4">Hub Versões ATS</h2>

      <div class="col-12 col-md-6 text-center mb-4">
        <input type="text" class="form-control mb-3 text-center" placeholder="Digite algum termo para Pesquisar...">
        <button class="btn btn-light w-100" onclick="pesquisarArquivos()">Pesquisar</button>
      </div>

      <h5 class="text-center text-white mb-4">Módulos:</h5>

      <div class="col-12 col-md-4 mb-4">
        <div class="card-custom bg-business" onclick="abrirModal('Resulth Business', 'ResulthBusiness_')">
          <img src="icons/business.png" class="card-icon" alt="Resulth Business">
          <h5>RESULTH BUSINESS</h5>
        </div>
      </div>

      <div class="col-12 col-md-4 mb-4">
        <div class="card-custom bg-start" onclick="abrirModal('Resulth Start', 'ResulthStart_')">
          <img src="icons/start.png" class="card-icon" alt="Resulth Start">
          <h5>RESULTH START</h5>
        </div>
      </div>

      <div class="col-12 col-md-4 mb-4">
        <div class="card-custom bg-entrega" onclick="abrirModal('Resulth EntregaCS', 'EntregasCs_')">
          <img src="icons/entrega.png" class="card-icon" alt="Resulth EntregasCS">
          <h5>RESULTH ENTREGASCS</h5>
        </div>
      </div>

      <div class="col-12 col-md-4 mb-4">
        <div class="card-custom bg-backup" onclick="abrirModal('Backup Now', 'BackupNow_')">
          <img src="icons/backup.png" class="card-icon" alt="Backup Now">
          <h5>BACKUP NOW</h5>
        </div>
      </div>

      <div class="col-12 col-md-4 mb-4">
        <div class="card-custom bg-sped" onclick="abrirModal('Resulth SPED', 'ResulthSPEDCS_')">
          <img src="icons/sped.png" class="card-icon" alt="Resulth SPED">
          <h5>RESULTH SPED</h5>
        </div>
      </div>

      <div class="col-12 col-md-4 mb-4">
        <div class="card-custom bg-checkout" onclick="abrirModal('Resulth Checkout', 'ResulthCheckout_')">
          <img src="icons/checkout.png" class="card-icon" alt="Resulth Checkout">
          <h5>RESULTH CHECKOUT</h5>
        </div>
      </div>
    </div>
  </div>

<!-- Modal -->
<div class="modal fade" id="modalDownload" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content bg-dark text-white">
      <div class="modal-header">
        <h5 class="modal-title" id="modalTitulo">Selecionar Versão</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <select id="selectVersoes" class="form-select mb-3 text-dark">
          <option selected disabled>Carregando versões...</option>
        </select>
        <button id="btnDownload" class="btn btn-success" disabled>Download</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal de Pesquisa -->
<div class="modal fade" id="modalPesquisa" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content bg-dark text-white">
      <div class="modal-header">
        <h5 class="modal-title">Resultados da Pesquisa</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body" id="resultadoPesquisa">
        <p>Carregando resultados...</p>
      </div>
    </div>
  </div>
</div>
<div style="position: fixed; bottom: 20px; right: 20px; z-index: 9999;">
<script type="text/javascript" src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js" data-name="bmc-button" data-slug="lucassousa" data-color="#FFDD00" data-emoji=""  data-font="Cookie" data-text="Compre-me um Café" data-outline-color="#000000" data-font-color="#000000" data-coffee-color="#ffffff" ></script>
</div>

<!-- Footer fixo -->
<footer class="footer">
  Desenvolvido por Lucas Sousa: <a href="mailto:lucassousa1532@hotmail.com">Email</a> - Êxitos Sistemas · Hub ATS v1.0
</footer>
</body>

<!-- Bootstrap JS SEM defer -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<!-- Seu script abaixo dele -->
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const modal = new bootstrap.Modal(document.getElementById('modalDownload'));
    const select = document.getElementById('selectVersoes');
    const titulo = document.getElementById('modalTitulo');
    const btnDownload = document.getElementById('btnDownload');

    let arquivos = [];

    window.abrirModal = function(nomeModulo, prefixo) {
      titulo.textContent = nomeModulo;
      btnDownload.disabled = true;
      select.innerHTML = `<option selected disabled>Carregando versões...</option>`;

      fetch('links.json')
        .then(res => res.json())
        .then(data => {
          arquivos = data.filter(a => a.nome.startsWith(prefixo));
          if (arquivos.length === 0) {
            select.innerHTML = `<option disabled selected>Nenhuma versão encontrada</option>`;
            return;
          }

          select.innerHTML = `<option disabled selected>Selecione uma versão</option>`;
          arquivos.forEach(arquivo => {
            const versao = arquivo.nome.replace(prefixo, '').replace('.rar', '');
            const opt = document.createElement('option');
            opt.value = arquivo.url;
            opt.textContent = versao;
            select.appendChild(opt);
          });
        });

      modal.show();
    }

    select.addEventListener('change', () => {
      btnDownload.disabled = false;
    });

    btnDownload.addEventListener('click', () => {
      const url = select.value;

      const link = document.createElement('a');
      link.href = url;
      link.target = '_blank';  // opcional: remove se quiser evitar nova aba
      link.download = '';      // força o download, se o servidor permitir
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    });
  });
  const modalPesquisa = new bootstrap.Modal(document.getElementById('modalPesquisa'));
  const resultadoPesquisa = document.getElementById('resultadoPesquisa');

  function pesquisarArquivos() {
    const termo = document.querySelector('input[type="text"]').value.trim().toLowerCase();

    if (!termo) {
      alert("Digite um termo para pesquisar.");
      return;
    }

    fetch('links.json')
      .then(res => res.json())
      .then(data => {
        const resultados = data.filter(a => a.nome.toLowerCase().includes(termo));

        if (resultados.length === 0) {
          resultadoPesquisa.innerHTML = `
          <p class="mb-3"><strong>${resultados.length}</strong> resultado(s) encontrado(s) para "<span class="text-info">${termo}</span>"</p>
          ${html}
        `;
        } else {
          // Agrupar por prefixo
          const grupos = {};
          resultados.forEach(arquivo => {
            const nome = arquivo.nome;
            const [prefixo] = nome.split("_");
            if (!grupos[prefixo]) grupos[prefixo] = [];
            grupos[prefixo].push(arquivo);
          });

          let html = '';
          for (const [modulo, arquivos] of Object.entries(grupos)) {
            html += `<div class="row align-items-center mb-3">
              <div class="col-12 col-md-8">
                <h6 class="text-info mb-0">${decodeURIComponent(modulo).toUpperCase()}</h6>
              </div>
              <div class="col-12 col-md-4">
                <select class="form-select text-dark mt-2 mt-md-0" onchange="baixarVersao(this)">
                  <option selected disabled>Selecione a versão</option>`;
            arquivos.forEach(a => {
              const versao = a.nome.replace(modulo + "_", "").replace(/\.rar|\.zip/i, '');
              html += `<option value="${a.url}">${versao}</option>`;
            });
            html += `</select>
              </div>
            </div>`;
          }

          resultadoPesquisa.innerHTML = html;
        }

        modalPesquisa.show();
      })
      .catch(() => {
        resultadoPesquisa.innerHTML = `<p class="text-danger">Erro ao carregar os arquivos. Verifique se o <code>links.json</code> está acessível.</p>`;
        modalPesquisa.show();
      });
  }

  // Função para download automático ao selecionar
  function baixarVersao(selectElement) {
    const url = selectElement.value;
    if (url) {
      window.open(url, '_blank');
    }
  }
</script>

</html>
<!--
Olá a você que chegou até aqui!
Esta página foi criada com o intuito de ajudar na indexação e acesso aos executáveis já disponiveis no site FTP da ATS Informática para Download no link: http://www.atscelular.com.br/downloadsversao/ .
Caso queira ajudar o projeto, sinta-se à vontade para contribuir com melhorias ou sugestões.
Qualquer coisa entre em contato com Lucas Sousa através do e-mail: lucassousa1532@hotmail.com
Caso queira dar um incentivo, você pode comprar um café através do botão "Compre-me um Café" no canto inferior direito da tela.
Agradeço desde já pela sua visita e espero que este hub seja útil para você!
-->